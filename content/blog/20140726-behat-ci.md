title: Behat CI
link: http://jaffamonkey.com/10930/behat-ci
author: jaffamonkey
description: 
post_id: 10930
created: 2014/07/26 18:39:46
created_gmt: 2014/07/26 18:39:46
comment_status: open
post_name: behat-ci
status: publish
post_type: post

# Behat CI

Behat handily generates JUnit reports, handy because Build tools sucj as Jenkins can process these reports to generate ongoing statistics and graphs. As often is with tech, solutions are simple but usually come with path of undefined length to reach that point :) So here is timesaver guide to quick integration of Behat tests.  Firstly, you need to your tests to be running headless.  As modern websites are heavily javascript-featured, or using js frameworks such as AngularJS, the standard Goutte headless browser client won't cut it.  I have had good degree of success with Selenium/PhantomJS, so would recommend that method.  The reason for headless is although browser testing is important, it is not fast.  And within a build environment, things move fast, so it is important for tests to be relevant and optimal. Jenkins is example here, but I am sure other such as Travis support JUnit report processing. \----------------------------------------------------- SETUP JENKINS BEHAT PROJECT \----------------------------------------------------- Create new project for the jenkins-behat project Create shell script to start/stop selenium (at start/end of test run) Add post-build action to you "Configure" section for your project. Select the "Publish JUnit test result report Add the folder where JUnit xml output is stored ("junit" for this example, check the behat.yml) **/junit/*.xml (path has to be specified in Ant glob syntax) Add a build action of "Execute shell" and add the following line bin/behat -p phantomjs features/ [path to your selenium start/stop shell script] Ensure phantomjs is installed on jenkins server (npm install -g phantomjs) When tests run (when your project builds), a JUnit xml report will output into folder "junit" (this is set in the behat.yml file). After a few builds, you will start to see graphs and charts available from your project homepage